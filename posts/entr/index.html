<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <link rel="stylesheet" href="/libs/highlight/github.min.css">
 
  <link rel="stylesheet" href="/css/franklin.css">
  <link rel="stylesheet" href="/css/basic.css">
  <link rel="icon" href="/assets/favicon.png">
   <title> Entr - Huijzer.xyz </title> 
  

  <meta property="og:title" content="Entr" />
  <meta property="og:type" content="article" /> 
  <meta property="og:description" content="A tool for executing commands automatically upon file changes." />
  <meta property="og:image" content="https://huijzer.xyz/assets/self.jpg" />

  <meta name="twitter:title" content="Entr" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:creator" content="@rikhuijzer"/>

  <script src="https://cdn.usefathom.com/script.js" data-site="BQRGKKNX" defer></script>
</head>
<body>
  <header>
<div class="blog-name"><a href="/">HUIJZER.XYZ</a></div>
<nav>
  <ul>
    <li><a href="/about/">About</a></li>
    <li><a href="/posts/">Blog</a></li>
    <li><a type="application/rss+xml" href="https://huijzer.xyz/feed.xml">
      <img class="rss-icon" src="/assets/feed.svg">
      </a></li>
  </ul>
</nav>
</header>


<div class="franklin-content">
   <h1 class="page-title"> Entr </h1> 
   <span class="page-date"> 2019-10-29 </span> 
</div>
<div class="franklin-content">
<p>Having a compile and run shortcut seems like the most basic requirement for a developer. Most fully fledged IDE&#39;s therefore include it. For example, PyCharm will automatically detect the main file for the current Python project and run it with the correct virtual environment. This is all nice and well until it does not work out of the box. For example, when working with LaTeX most text editors can install a plugin which introduces a compile and run shortcut. Or, if you are lucky you can write down some script at some place in the editor which will execute upon a certain key press. This works as long as your static script is able to infer the correct file to execute. If not then the editor command needs to be changed for each project.</p>
<p>With this post I would like to inform people about a simple solution, namely <code>entr</code>. The <a href="http://eradman.com/entrproject/">entr</a> tool can be set-up to execute a command if one or more files change. The tool is available in at least the Ubuntu and Nix package managers. For NixOS simply add <code>pkgs.entr</code> to <code>environment.systemPackages</code>.</p>
<h2 id="examples"><a href="#examples" class="header-anchor">Examples</a></h2>
<p>For running a Python program where the main function is located in <code>MyProject.py</code> use</p>
<pre><code class="language-bash">find . -iname &quot;*.py&quot; | entr python MyProject.py</code></pre>
<p>and for LaTeX</p>
<pre><code class="language-bash">find . -iname &quot;*.tex&quot; -o -iname &quot;*.bib&quot; | entr latexmk -f -pdf</code></pre>
<h2 id="fine_tuning"><a href="#fine_tuning" class="header-anchor">Fine tuning</a></h2>
<p>When using some shell with a reverse search this works reasonably convenient. It can be more convenient by adding the command as an abbreviation. &#40;Or alias if you must, but this has <a href="https://www.sean.sh/log/when-an-alias-should-actually-be-an-abbr/">some drawbacks</a>.&#41; To your Fish shell init script you could add</p>
<pre><code class="language-julia">abbr el &#39;find . -iname &quot;*.tex&quot; -o -iname &quot;*.bib&quot; | entr latexmk -f -pdf&#39;</code></pre>
<p>To speed up things even more when using Vim add the following shortcuts to the Vim configuration</p>
<pre><code class="language-julia">nmap &lt;C-s&gt; :wa&lt;CR&gt;
imap &lt;C-s&gt; &lt;ESC&gt;:wa&lt;CR&gt;i</code></pre>
<p>After setting these all open buffers will be saved when pressing <code>Ctrl &#43; s</code>.</p>
<div class="page-foot">
  <div class="copyright">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> Rik Huijzer. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
    Last update: 2021-10-14.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
    
    
        <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
